## [位運算n & (n-1)的妙用](https://blog.csdn.net/navyifanr/article/details/19496459)

  * ```n&(n-1)```作用：將n的二進製表示中的最低位為```1```的改為```0```，先看一個簡單的例子：
```n = 10100(二進制）```，則  ```(n-1) = 10011 ==》n& (n-1) = 10000```
可以看到原本最低位為1的那位變為0。
弄明白了```n&(n-1)```的作用，那它有哪些應用？

-------------------------------------------------- -------------------------------------------------- --


1、判斷一個數是否是2的方冪
```n > 0 && ((n & (n - 1)) == 0 )```

解釋```((n & (n-1)) == 0)```：

如果```A&B==0```，表示```A```與```B```的二進制形式沒有在同一個位置都為```1```的時候。

那麼本題到底啥意思？？

不妨先看下```n-1```是什麼意思。

   令:```n=1101011000(二進制,十進制也一樣)```，則 ```n-1=1101010111。```

```n&(n-1)=1101010000```

由此可以得出，```n```和```n-1```的低位不一樣，直到有個轉折點，就是藉位的那個點，從這個點開始的高位，```n```和```n-1```都一樣，如果高位一樣這就造成一個問題，就是```n```和```n-1```在相同的位上可能會有同一個```1```，從而使```((n & (n-1)) != 0)```,如果想要

```((n & (n-1)) == 0)```，則高位必須全為```0```，這樣就沒有相同的```1```。

所以```n```是```2```的冪或```0```

2.求某一個數的二進製表示中1的個數
```
while (n >0 ) {
  ++count ;
  n &= (n-1); 
  }
```




3.計算```N!```的質因數2的個數。
容易得出```N!```質因數```2```的個數= ```[N / 2] + [N / 4] + [N / 8] + ....```
下面通過一個簡單的例子來推導一下過程：```N = 10101```(二進制表示）
現在我們跟踪最高位的```1```，不考慮其他位假定為```0```，
則在
```
[N / 2] 01000
[N / 4] 00100
[N / 8] 00010
[N / 8] 00001
```
則所有相加等於```01111 = 10000 - 1```
由此推及其他位可得：```(10101)!```的質因數```2```的個數為```10000 - 1 + 00100 - 1 + 00001 - 1 = 10101 - 3```(二進製表示中1的個數)

推及一般N!的質因數2的個數為```N``` - ```N二進製表示中1的個數```
